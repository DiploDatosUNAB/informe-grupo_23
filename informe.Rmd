---
title: "TP1"
author: "Mauro Cejas Marcovecchio"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# Cargar los paquetes necesarios acá

library(readr)
library(dplyr)

```


## Introducción

Los datos utilizados en este Trabajo Práctico corresponden al 'Presupuesto de gastos y su ejecución' del portal de Datos Abiertos del Ministerio de Economía. Como su nombre lo indica, contiene información acerca de los montos presupuestados iniciales, vigentes, montos comprometidos, ejecutados y pagados de cada uno de los sectores de la Administración Pública Central, agrupados de forma anual. Cabe aclarar que únicamente incluye datos del ejercicio 2023, que se encuentran expresados en millones de pesos y fue actualizado por última vez el 16 de mayo del mismo año.

De esta manera, con el objetivo de contar con la versión más actualizada disponible de esta base de datos, vamos a automatizar la descarga desde la web, así como también vamos a descomprimirla.


```{r}
url <- "https://www.presupuestoabierto.gob.ar/datasets/2023/credito-anual-2023.zip"
destino <- "datos/credito-anual-2023.zip"  # Ruta y nombre del archivo de destino
download.file(url, destino)

```


```{r}

archivo_zip <- "datos/credito-anual-2023.zip"
destino <- "datos"
unzip(archivo_zip, exdir = destino)

```

## Exploración de los datos

```{r}

presupuesto <- read_csv("datos/credito-anual-2023.csv",)

```

Primero, vamos a renombrar algunas columnas para que sea más comprensible saber qué datos contienen.

```{r}

presupuesto <- presupuesto |>
  rename (presupuesto_inicial = credito_presupuestado, presupuesto_vigente = credito_vigente, comprometido = credito_comprometido, ejecutado = credito_devengado, pagado = credito_pagado)

```

Luego, vamos a descartar aquellas columnas cuyo análisis no nos interesa.

```{r}

presupuesto |>
  select(-c(ultima_actualizacion_fecha, codigo_bapin_desc, codigo_bapin_id, prestamo_externo_desc, prestamo_externo_id, ejercicio_presupuestario))

```

Posteriormente, procedemos a cambiar la forma en la que se separan los decimales de las columnas que contienen números para poder operar con ellas.

```{r}

presupuesto <- presupuesto |>
  mutate(presupuesto_inicial = gsub(",", ".", presupuesto_inicial, fixed = TRUE),
         presupuesto_vigente = gsub(",", ".", presupuesto_vigente, fixed = TRUE),
         comprometido = gsub(",", ".", comprometido, fixed = TRUE),
         ejecutado = gsub(",", ".", ejecutado, fixed = TRUE),
         pagado = gsub(",", ".", pagado, fixed = TRUE))

```

```{r}
presupuesto <- presupuesto |>
  mutate(presupuesto_inicial = as.numeric(presupuesto_inicial),
         presupuesto_vigente = as.numeric(presupuesto_vigente),
         comprometido = as.numeric(comprometido),
         ejecutado = as.numeric(ejecutado),
         pagado = as.numeric(pagado))

```

Así, podemos calcular la suma del presupuesto total vigente de toda la administración nacional.

```{r}

presupuesto |>
  summarise(presup_vigente_total = sum(presupuesto_vigente, na.rm = TRUE))


```

Como también podemos discriminar qué presupuesto fue asignado a cada jurisdicción.

```{r}

presupuesto |>
  group_by(jurisdiccion_desc) |>
  summarise(presup_vigente_minist = sum(presupuesto_vigente, na.rm = TRUE)) |>
  arrange(desc(presup_vigente_minist))


```

También podemos calcular la media de presupuesto asignada por jurisdicción.

```{r}

presupuesto |>
  summarise(presup_vigente_minist = sum(presupuesto_vigente, na.rm = TRUE)) |>
  summarise(presup_vigente_minist_mean = mean(presup_vigente_minist, na.rm = TRUE))


```

```{r}

presupuesto |>
  summarise(presup_vigente_minist = sum(presupuesto_vigente, na.rm = TRUE)) |>
  summarise(presup_vigente_minist_sd = sd(presup_vigente_minist, na.rm = TRUE))


```

Podemos descubrir el presupuesto vigente mínimo.

```{r}

presupuesto |>
  group_by(jurisdiccion_desc) |>
  summarise(presup_vigente_minist = sum(presupuesto_vigente, na.rm = TRUE)) |>
  summarise(presup_vigente_min = min(presup_vigente_minist, na.rm = TRUE))
  

```

Y podemos descubrir el presupuesto vigente máximo.

```{r}

presupuesto |>
  group_by(jurisdiccion_desc) |>
  summarise(presup_vigente_minist = sum(presupuesto_vigente, na.rm = TRUE)) |>
  summarise(presup_vigente_max = max(presup_vigente_minist, na.rm = TRUE))
  

```


## Hipótesis


